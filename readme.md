# Espeak Converter
Данная программа позволяет преобразовывать текстовые книги в mp3 формат.

Внимание, эта программа очень узкоспециализирована, она является временным решением, и её поддержка, скорее всего, будет прекращена после того, как сервис [Текст в речь](https://data2data.ru/tts) получит обновление.

## Алгоритм работы программы
1. Пользователь вводит один или несколько url-адресов на книги в формате txt или fb2 (или архив с книгой / книгами в данном формате).
2. Программа последовательно скачивает книги и преобразовывает их синтезатором eSpeak в формат mp3 (используется lame).

Для запуска из исходников скачайте / соберите espeak-ng, и поместите папку espeak-ng-data в папку lib/espeak.

## Возможности программы
Можно использовать прямые url на поддерживаемые типы файлов.

Также поддерживаются url на страницы флибусты, программа собирает все ссылки на fb2 файлы, и конвертирует их.

Поддерживаются локальные пути, скопированные из проводника windows.

Т.е. пути, заключённые в кавычки. Такие пути можно сразу вставлять в программу.

Также поддерживаются пути без кавычек.

Пути должны быть абсолютными, и начинаться с буквы тома.

Поддерживаются txt и fb2 файлы.

Если файл не входит в список поддерживаемых, он будет воспринят как архив.

При успешной распаковки архива все содержащиеся в нём txt и fb2 файлы будут обработаны.

Исходная структура архива не сохраняется, файлы будут помещены в одну папку.

## Используемые компоненты
1. lame - используется для преобразования wave-данных в mp3.
2. unar - используется для распаковки архивов.
3. espeak-ng - используется для преобразования текста в речь (собран с некоторыми модификациями).

В espeak-ng внесены следующие изменения:
1. Sonic активируется со скорости 451 слов в минуту, что позволяет достич немного большей скорости. В оригинале - 450.
2. Игнорируется параметр speed в конфигурационном файле голоса.
3. [Этот патч](https://github.com/espeak-ng/espeak-ng/pull/1965).

Данные изменения можно увидеть [здесь](https://github.com/Danstiv/espeak-ng/tree/speed-test).
